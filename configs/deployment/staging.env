# Staging Environment Configuration
# This file contains environment-specific settings for staging deployment
# Used for testing and validation before production deployment

# Application Settings
ENVIRONMENT=staging
LOG_LEVEL=DEBUG
REQUIRE_AUTH=true
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# Database Configuration
DB_HOST=complianceai-postgres-staging
DB_PORT=5432
DB_NAME=complianceai_staging
DB_USER=complianceai
DB_PASSWORD=<replace-with-staging-password>
DB_SSL_MODE=require
DB_MAX_CONNECTIONS=50
DB_CONNECTION_TIMEOUT=30

# MongoDB Configuration
MONGODB_HOST=complianceai-mongodb-staging
MONGODB_PORT=27017
MONGODB_DB=complianceai_staging
MONGODB_USER=complianceai
MONGODB_PASSWORD=<replace-with-staging-password>
MONGODB_SSL=true
MONGODB_REPLICA_SET=rs0
MONGODB_MAX_POOL_SIZE=25

# Redis Configuration
REDIS_HOST=complianceai-redis-staging
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=<replace-with-staging-password>
REDIS_SSL=true
REDIS_MAX_CONNECTIONS=20
REDIS_CONNECTION_TIMEOUT=30

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=complianceai-kafka-staging-0:9092,complianceai-kafka-staging-1:9092
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=complianceai
KAFKA_SASL_PASSWORD=<replace-with-staging-password>
KAFKA_SSL_CA_LOCATION=/etc/ssl/certs/ca-certificates.crt
KAFKA_NUM_PARTITIONS=2
KAFKA_DEFAULT_REPLICATION_FACTOR=2
KAFKA_REQUEST_TIMEOUT_MS=30000
KAFKA_SESSION_TIMEOUT_MS=30000

# Security Configuration
JWT_SECRET_KEY=<replace-with-staging-jwt-secret>
ENCRYPTION_KEY=<replace-with-staging-encryption-key>
AES_ENCRYPTION_KEY=<replace-with-staging-aes-key>
HMAC_SECRET_KEY=<replace-with-staging-hmac-key>

# OAuth2 Configuration
OAUTH2_CLIENT_ID=<replace-with-staging-oauth-client-id>
OAUTH2_CLIENT_SECRET=<replace-with-staging-oauth-client-secret>
OAUTH2_AUTHORIZATION_URL=<replace-with-staging-oauth-auth-url>
OAUTH2_TOKEN_URL=<replace-with-staging-oauth-token-url>
OAUTH2_USER_INFO_URL=<replace-with-staging-oauth-user-info-url>
OAUTH2_REDIRECT_URI=https://staging.complianceai.example.com/auth/callback

# Regulatory API Configuration (Sandbox/Test endpoints)
EBA_API_BASE_URL=https://sandbox-api.eba.europa.eu
EBA_CLIENT_ID=<replace-with-staging-eba-client-id>
EBA_CLIENT_SECRET=<replace-with-staging-eba-client-secret>
EBA_TOKEN_URL=https://sandbox-api.eba.europa.eu/oauth/token

FEDERAL_RESERVE_API_BASE_URL=https://sandbox-api.federalreserve.gov
FEDERAL_RESERVE_API_KEY=<replace-with-staging-frb-api-key>

# SFTP Configuration (Test environment)
SFTP_HOST=sftp-test.regulator.example.com
SFTP_PORT=22
SFTP_USERNAME=complianceai_staging
SFTP_KEY_PATH=/secrets/sftp/staging_private_key
SFTP_KNOWN_HOSTS_PATH=/secrets/sftp/staging_known_hosts
SFTP_CONNECTION_TIMEOUT=30
SFTP_MAX_RETRIES=3

# Email Configuration
SMTP_HOST=smtp-staging.company.com
SMTP_PORT=587
SMTP_USERNAME=complianceai-staging@company.com
SMTP_PASSWORD=<replace-with-staging-smtp-password>
SMTP_TLS=true
SMTP_FROM_EMAIL=complianceai-staging@company.com
SMTP_FROM_NAME=ComplianceAI Staging

# Slack Integration
SLACK_WEBHOOK_URL=<replace-with-staging-slack-webhook-url>
SLACK_CHANNEL=#compliance-staging
SLACK_USERNAME=ComplianceAI-Staging
SLACK_ICON_EMOJI=:construction:

# Monitoring Configuration
PROMETHEUS_PUSHGATEWAY_URL=http://prometheus-pushgateway-staging:9091
GRAFANA_URL=https://staging-grafana.company.com
GRAFANA_API_KEY=<replace-with-staging-grafana-api-key>

# Backup Configuration
BACKUP_S3_BUCKET=complianceai-staging-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=<replace-with-staging-aws-access-key>
BACKUP_S3_SECRET_KEY=<replace-with-staging-aws-secret-key>
BACKUP_RETENTION_DAYS=7
BACKUP_ENCRYPTION_KEY=<replace-with-staging-backup-encryption-key>

# Load Balancing Configuration
LOAD_BALANCER_ALGORITHM=least_conn
LOAD_BALANCER_MAX_CONNECTIONS=500
LOAD_BALANCER_TIMEOUT=30

# Performance Tuning (Reduced for staging)
REPORT_GENERATION_TIMEOUT=1800
MAX_CONCURRENT_REPORTS=2
DATA_PROCESSING_BATCH_SIZE=1000
CACHE_TTL_SECONDS=1800
API_RATE_LIMIT_REQUESTS_PER_MINUTE=500

# Resource Limits (Reduced for staging)
WEB_INTERFACE_CPU_LIMIT=500m
WEB_INTERFACE_MEMORY_LIMIT=512Mi
WEB_INTERFACE_CPU_REQUEST=250m
WEB_INTERFACE_MEMORY_REQUEST=256Mi

POSTGRES_CPU_LIMIT=1000m
POSTGRES_MEMORY_LIMIT=2Gi
POSTGRES_CPU_REQUEST=500m
POSTGRES_MEMORY_REQUEST=1Gi

REDIS_CPU_LIMIT=250m
REDIS_MEMORY_LIMIT=512Mi
REDIS_CPU_REQUEST=125m
REDIS_MEMORY_REQUEST=256Mi

KAFKA_CPU_LIMIT=500m
KAFKA_MEMORY_LIMIT=1Gi
KAFKA_CPU_REQUEST=250m
KAFKA_MEMORY_REQUEST=512Mi

# Logging Configuration
LOG_MAX_SIZE=50MB
LOG_MAX_FILES=5
LOG_COMPRESSION=gzip
CENTRALIZED_LOGGING_ENABLED=true
LOG_SHIPPING_ENDPOINT=https://staging-logs.company.com/api/logs

# Audit Configuration
AUDIT_ENABLED=true
AUDIT_RETENTION_DAYS=365
AUDIT_ENCRYPTION_ENABLED=true
AUDIT_IMMUTABLE=true
AUDIT_EXTERNAL_STORAGE=s3://complianceai-staging-audit-logs

# Compliance Configuration
COMPLIANCE_MODE=normal
REGULATORY_DEADLINE_BUFFER_DAYS=2
AUTO_ESCALATION_ENABLED=true
COMPLIANCE_REPORTING_ENABLED=true
REGULATORY_CHANGE_MONITORING_ENABLED=true

# Feature Flags
EXPERIMENTAL_FEATURES_ENABLED=true
ADVANCED_ANALYTICS_ENABLED=true
MACHINE_LEARNING_ENABLED=true
BLOCKCHAIN_AUDIT_ENABLED=false

# Network Configuration
INTERNAL_NETWORK_CIDR=10.0.0.0/8
EXTERNAL_ACCESS_CIDR=10.0.0.0/8
VPN_REQUIRED=false
IP_WHITELIST_ENABLED=false

# SSL/TLS Configuration
SSL_CERTIFICATE_PATH=/etc/ssl/certs/staging.complianceai.crt
SSL_PRIVATE_KEY_PATH=/etc/ssl/private/staging.complianceai.key
SSL_CA_CERTIFICATE_PATH=/etc/ssl/certs/staging-ca.crt
SSL_PROTOCOL=TLSv1.2
SSL_CIPHERS=HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA

# Session Management
SESSION_TIMEOUT_MINUTES=60
SESSION_MAX_CONCURRENT=10
SESSION_REMEMBER_ME_DAYS=7
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# File Upload Configuration
MAX_FILE_SIZE=50MB
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,csv,json,xml
FILE_UPLOAD_TIMEOUT=150
FILE_VIRUS_SCANNING_ENABLED=true
FILE_ENCRYPTION_ENABLED=true

# API Configuration
API_VERSION=v1
API_TIMEOUT_SECONDS=30
API_MAX_REQUEST_SIZE=10MB
API_RATE_LIMIT_ENABLED=true
API_CORS_ENABLED=true
API_CORS_ORIGINS=https://staging.complianceai.example.com
API_DOCUMENTATION_ENABLED=true

# Container Registry Configuration
CONTAINER_REGISTRY=registry-staging.company.com/complianceai
CONTAINER_REGISTRY_USERNAME=<replace-with-staging-registry-username>
CONTAINER_REGISTRY_PASSWORD=<replace-with-staging-registry-password>
IMAGE_PULL_POLICY=Always
IMAGE_SECURITY_SCANNING_ENABLED=true

# Kubernetes Configuration
KUBERNETES_NAMESPACE=complianceai-staging
KUBERNETES_CLUSTER_NAME=staging-cluster
KUBERNETES_SERVICE_ACCOUNT=complianceai-staging-service-account
KUBERNETES_INGRESS_CLASS=nginx
KUBERNETES_STORAGE_CLASS=standard

# Cloud Configuration
CLOUD_PROVIDER=AWS
CLOUD_REGION=us-east-1
CLOUD_AVAILABILITY_ZONES=us-east-1a,us-east-1b
CLOUD_VPC_ID=<replace-with-staging-vpc-id>
CLOUD_SECURITY_GROUPS=<replace-with-staging-security-group-ids>

# Disaster Recovery Configuration
DR_ENABLED=false
DR_REGION=us-east-1
DR_BACKUP_SCHEDULE=0 2 * * *
DR_RTO_MINUTES=240
DR_RPO_MINUTES=60
DR_FAILOVER_AUTOMATIC=false

# Maintenance Configuration
MAINTENANCE_WINDOW_START=22:00
MAINTENANCE_WINDOW_END=02:00
MAINTENANCE_WINDOW_TIMEZONE=UTC
MAINTENANCE_AUTO_APPROVAL=true
MAINTENANCE_NOTIFICATION_DAYS=1

# Cost Optimization
COST_OPTIMIZATION_ENABLED=false
AUTO_SCALING_ENABLED=false
SPOT_INSTANCES_ENABLED=false
RESERVED_INSTANCES_ENABLED=false

# Support Configuration
SUPPORT_EMAIL=staging-support@company.com
SUPPORT_PHONE=+1-555-0124
SUPPORT_PORTAL_URL=https://staging-support.company.com
SUPPORT_TICKET_SYSTEM=Jira-Staging
SUPPORT_SLA_HOURS=24
