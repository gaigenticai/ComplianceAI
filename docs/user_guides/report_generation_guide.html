<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Generation and Submission Guide - ComplianceAI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header p {
            font-size: 1.2em;
            color: #7f8c8d;
        }
        .toc {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }
        .toc h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .toc ul {
            list-style: none;
            padding: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            color: #3498db;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .toc a:hover {
            background: #e3f2fd;
        }
        .section {
            margin-bottom: 50px;
            scroll-margin-top: 80px;
        }
        .section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            font-size: 1.8em;
            margin-top: 40px;
        }
        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin-top: 30px;
        }
        .section h4 {
            color: #5a6c7d;
            font-size: 1.2em;
            margin-top: 20px;
        }
        .step-list {
            counter-reset: step-counter;
            margin: 20px 0;
        }
        .step-list li {
            counter-increment: step-counter;
            margin-bottom: 15px;
            padding-left: 40px;
            position: relative;
        }
        .step-list li::before {
            content: counter(step-counter;
            position: absolute;
            left: 0;
            top: 0;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #3498db;
        }
        .feature-card h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .highlight {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
        }
        .screenshot-placeholder {
            background: #e9ecef;
            border: 2px dashed #dee2e6;
            border-radius: 5px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            color: #6c757d;
        }
        .config-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .config-table th,
        .config-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        .config-table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        .config-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .workflow-diagram {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        .workflow-step {
            display: inline-block;
            background: white;
            border: 2px solid #3498db;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            line-height: 56px;
            text-align: center;
            margin: 10px;
            font-weight: bold;
            color: #3498db;
        }
        .workflow-arrow {
            display: inline-block;
            margin: 0 10px;
            color: #3498db;
            font-size: 1.5em;
        }
        .api-endpoint {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .api-endpoint .method {
            font-weight: bold;
            color: #0056b3;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            color: #6c757d;
        }
        .nav-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        .nav-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }
        .nav-button:hover {
            background: #2980b9;
        }
        .tab-container {
            margin: 20px 0;
        }
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e74c3c;
        }
        .tab-button {
            padding: 15px 25px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #495057;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background: #e74c3c;
            color: white;
        }
        .tab-button:hover {
            background: #dee2e6;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="nav-buttons">
        <button class="nav-button" onclick="scrollToTop()">Top</button>
        <button class="nav-button" onclick="toggleTOC()">TOC</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>Report Generation and Submission Guide</h1>
            <p>Complete guide to generating and submitting regulatory reports with ComplianceAI</p>
        </div>

        <div class="toc" id="toc">
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#overview">Report Generation Overview</a></li>
                <li><a href="#report-types">Report Types and Templates</a></li>
                <li><a href="#data-collection">Data Collection Process</a></li>
                <li><a href="#generation-process">Report Generation Process</a></li>
                <li><a href="#validation">Quality Assurance and Validation</a></li>
                <li><a href="#approval">Approval Workflows</a></li>
                <li><a href="#submission">Report Submission Methods</a></li>
                <li><a href="#monitoring">Monitoring and Tracking</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
                <li><a href="#best-practices">Best Practices</a></li>
            </ul>
        </div>

        <section id="overview" class="section">
            <h2>Report Generation Overview</h2>

            <div class="workflow-diagram">
                <h3>Report Generation Workflow</h3>
                <div class="workflow-step">1<br>Data</div>
                <div class="workflow-arrow">→</div>
                <div class="workflow-step">2<br>Validate</div>
                <div class="workflow-arrow">→</div>
                <div class="workflow-step">3<br>Generate</div>
                <div class="workflow-arrow">→</div>
                <div class="workflow-step">4<br>QA</div>
                <div class="workflow-arrow">→</div>
                <div class="workflow-step">5<br>Approve</div>
                <div class="workflow-arrow">→</div>
                <div class="workflow-step">6<br>Submit</div>
            </div>

            <p>The ComplianceAI report generation system provides end-to-end automation for regulatory reporting, from data collection to submission confirmation.</p>

            <h3>Key Features</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🔄 Automated Generation</h4>
                    <p>Scheduled and on-demand report generation with full automation</p>
                </div>
                <div class="feature-card">
                    <h4>✅ Quality Assurance</h4>
                    <p>Multi-level validation and automated quality checks</p>
                </div>
                <div class="feature-card">
                    <h4>🔒 Secure Submission</h4>
                    <p>Encrypted delivery via SFTP, EBA API, and other secure channels</p>
                </div>
                <div class="feature-card">
                    <h4>📊 Real-time Monitoring</h4>
                    <p>Complete visibility into report status and delivery confirmation</p>
                </div>
            </div>

            <h3>Report Generation Dashboard</h3>
            <div class="screenshot-placeholder">
                [Report Generation Dashboard Screenshot]<br>
                Main interface for report generation, monitoring, and management
            </div>
        </section>

        <section id="report-types" class="section">
            <h2>Report Types and Templates</h2>

            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="showTab('finrep')">FINREP</button>
                    <button class="tab-button" onclick="showTab('corep')">COREP</button>
                    <button class="tab-button" onclick="showTab('dora')">DORA</button>
                    <button class="tab-button" onclick="showTab('custom')">Custom Reports</button>
                </div>

                <div id="finrep" class="tab-content active">
                    <h3>FINREP (Financial Reporting)</h3>
                    <p>Comprehensive financial statements for credit institutions under EBA guidelines.</p>

                    <table class="config-table">
                        <thead>
                            <tr>
                                <th>Template ID</th>
                                <th>Report Name</th>
                                <th>Frequency</th>
                                <th>Format</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>FINREP_F_01_01</td>
                                <td>Balance Sheet</td>
                                <td>Quarterly</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>FINREP_F_01_02</td>
                                <td>Income Statement</td>
                                <td>Quarterly</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>FINREP_F_02_01</td>
                                <td>Cash Flow Statement</td>
                                <td>Quarterly</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>FINREP_F_03_01</td>
                                <td>Statement of Changes</td>
                                <td>Quarterly</td>
                                <td>XBRL</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>XBRL Template Example</h4>
                    <div class="code-block">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xbrl xmlns="http://www.xbrl.org/2003/instance"
      xmlns:finrep="http://www.eba.europa.eu/xbrl/crr/finrep/its-2023-01"&gt;

  &lt;xbrli:context id="I-2023"&gt;
    &lt;xbrli:entity&gt;
      &lt;xbrli:identifier scheme="http://www.eba.europa.eu/xbrl/crr/finrep/its-2023-01"&gt;BANK001&lt;/xbrli:identifier&gt;
    &lt;/xbrli:entity&gt;
    &lt;xbrli:period&gt;
      &lt;xbrli:instant&gt;2023-12-31&lt;/xbrli:instant&gt;
    &lt;/xbrli:period&gt;
  &lt;/xbrli:context&gt;

  &lt;finrep:Assets&gt;
    &lt;finrep:CashAndBalancesWithCentralBanks contextRef="I-2023"&gt;1500000000&lt;/finrep:CashAndBalancesWithCentralBanks&gt;
    &lt;finrep:LoansAndAdvancesToBanks contextRef="I-2023"&gt;500000000&lt;/finrep:LoansAndAdvancesToBanks&gt;
    &lt;finrep:LoansAndAdvancesToCustomers contextRef="I-2023"&gt;25000000000&lt;/finrep:LoansAndAdvancesToCustomers&gt;
  &lt;/finrep:Assets&gt;

&lt;/xbrl&gt;
                    </div>
                </div>

                <div id="corep" class="tab-content">
                    <h3>COREP (COmmon REPorting)</h3>
                    <p>Prudential reporting framework for capital adequacy and risk management.</p>

                    <table class="config-table">
                        <thead>
                            <tr>
                                <th>Template ID</th>
                                <th>Report Name</th>
                                <th>Purpose</th>
                                <th>Format</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>COREP_C_01_00</td>
                                <td>Own Funds</td>
                                <td>Capital adequacy assessment</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>COREP_C_02_00</td>
                                <td>Large Exposures</td>
                                <td>Large exposure monitoring</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>COREP_C_03_00</td>
                                <td>Leverage Ratio</td>
                                <td>Leverage ratio calculation</td>
                                <td>XBRL</td>
                            </tr>
                            <tr>
                                <td>COREP_C_04_00</td>
                                <td>Liquidity Coverage</td>
                                <td>Liquidity risk assessment</td>
                                <td>XBRL</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="dora" class="tab-content">
                    <h3>DORA (Digital Operational Resilience)</h3>
                    <p>ICT risk management and operational resilience reporting.</p>

                    <table class="config-table">
                        <thead>
                            <tr>
                                <th>Report Type</th>
                                <th>Description</th>
                                <th>Frequency</th>
                                <th>Format</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ICT Risk Framework</td>
                                <td>ICT risk management framework</td>
                                <td>Annual</td>
                                <td>JSON</td>
                            </tr>
                            <tr>
                                <td>Incident Reporting</td>
                                <td>Major ICT incidents</td>
                                <td>As needed</td>
                                <td>JSON</td>
                            </tr>
                            <tr>
                                <td>Third-party ICT Risk</td>
                                <td>Third-party provider risks</td>
                                <td>Annual</td>
                                <td>JSON</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="custom" class="tab-content">
                    <h3>Custom Reports</h3>
                    <p>Institution-specific regulatory reports and ad-hoc reporting.</p>

                    <h4>Supported Formats</h4>
                    <ul>
                        <li><strong>XBRL:</strong> Standardised business reporting</li>
                        <li><strong>CSV:</strong> Comma-separated values for data exchange</li>
                        <li><strong>JSON:</strong> Structured data for API integrations</li>
                        <li><strong>XML:</strong> Extensible markup language</li>
                        <li><strong>PDF:</strong> Human-readable reports</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="data-collection" class="section">
            <h2>Data Collection Process</h2>

            <h3>Data Sources</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🏦 Core Banking Systems</h4>
                    <p>SAP, Temenos, FIS, Oracle FLEXCUBE integration</p>
                </div>
                <div class="feature-card">
                    <h4>📊 Risk Management Systems</h4>
                    <p>Risk calculation and exposure data</p>
                </div>
                <div class="feature-card">
                    <h4>💰 Treasury Systems</h4>
                    <p>Cash management and liquidity data</p>
                </div>
                <div class="feature-card">
                    <h4>📈 General Ledger</h4>
                    <p>Accounting and financial data</p>
                </div>
            </div>

            <h3>Data Collection Workflow</h3>
            <div class="step-list">
                <li><strong>Source Identification:</strong> Identify required data sources for each report</li>
                <li><strong>Connection Setup:</strong> Configure secure connections to data sources</li>
                <li><strong>Data Extraction:</strong> Extract data using predefined queries and mappings</li>
                <li><strong>Data Transformation:</strong> Convert data to required report formats</li>
                <li><strong>Data Validation:</strong> Validate data completeness and accuracy</li>
                <li><strong>Data Storage:</strong> Store validated data in staging area</li>
            </div>

            <h3>Data Mapping Configuration</h3>
            <div class="code-block">
// Data Mapping Configuration Example
{
  "report_type": "FINREP_F_01_01",
  "data_mappings": {
    "assets": {
      "source_table": "GL_BALANCES",
      "source_column": "BALANCE_AMOUNT",
      "filter_condition": "ACCOUNT_TYPE = 'ASSET'",
      "transformation": "SUM(BALANCE_AMOUNT)",
      "target_field": "finrep:TotalAssets"
    },
    "liabilities": {
      "source_table": "GL_BALANCES",
      "source_column": "BALANCE_AMOUNT",
      "filter_condition": "ACCOUNT_TYPE = 'LIABILITY'",
      "transformation": "SUM(BALANCE_AMOUNT)",
      "target_field": "finrep:TotalLiabilities"
    }
  },
  "validation_rules": {
    "balance_check": "assets = liabilities + equity",
    "completeness_check": "all required fields present",
    "reasonableness_check": "values within expected ranges"
  }
}
            </div>

            <h3>Data Quality Checks</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Check Type</th>
                        <th>Description</th>
                        <th>Action on Failure</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Completeness</td>
                        <td>All required fields present</td>
                        <td>Report generation blocked</td>
                    </tr>
                    <tr>
                        <td>Accuracy</td>
                        <td>Data matches source systems</td>
                        <td>Warning notification</td>
                    </tr>
                    <tr>
                        <td>Consistency</td>
                        <td>Data relationships are valid</td>
                        <td>Validation error</td>
                    </tr>
                    <tr>
                        <td>Timeliness</td>
                        <td>Data is up-to-date</td>
                        <td>Staleness alert</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="generation-process" class="section">
            <h2>Report Generation Process</h2>

            <h3>Generation Methods</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>⏰ Scheduled Generation</h4>
                    <p>Automated generation based on regulatory calendars</p>
                </div>
                <div class="feature-card">
                    <h4>🖱️ On-Demand Generation</h4>
                    <p>Manual generation for testing and ad-hoc reports</p>
                </div>
                <div class="feature-card">
                    <h4>🔄 Event-Driven Generation</h4>
                    <p>Triggered by system events or data updates</p>
                </div>
                <div class="feature-card">
                    <h4>📦 Batch Generation</h4>
                    <p>Multiple reports generated simultaneously</p>
                </div>
            </div>

            <h3>Generation Steps</h3>
            <div class="step-list">
                <li><strong>Parameter Setup:</strong> Configure report parameters and options</li>
                <li><strong>Data Retrieval:</strong> Fetch validated data from staging area</li>
                <li><strong>Template Application:</strong> Apply regulatory templates to data</li>
                <li><strong>Calculation Engine:</strong> Perform required calculations and aggregations</li>
                <li><strong>Format Conversion:</strong> Convert to required output format (XBRL, CSV, etc.)</li>
                <li><strong>File Generation:</strong> Create final report files with metadata</li>
                <li><strong>Storage:</strong> Store generated reports in secure repository</li>
            </div>

            <h3>Report Generation API</h3>
            <div class="api-endpoint">
                <div class="method">POST</div> <code>/api/v1/reports/generate</code><br>
                Generate a regulatory report
            </div>

            <div class="code-block">
// Report Generation Request
{
  "report_type": "FINREP",
  "template_id": "FINREP_F_01_01",
  "parameters": {
    "reporting_date": "2023-12-31",
    "institution_id": "BANK001",
    "consolidation_level": "solo",
    "currency": "EUR"
  },
  "output_formats": ["XBRL", "CSV"],
  "delivery_methods": ["SFTP", "EBA_API"],
  "notification_emails": ["compliance@bank.com"]
}

// Response
{
  "request_id": "GEN-2023-001",
  "status": "ACCEPTED",
  "estimated_completion": "2024-01-01T02:00:00Z",
  "report_ids": ["FINREP-2023-Q4-001"],
  "tracking_url": "/api/v1/reports/status/GEN-2023-001"
}
            </div>

            <h3>Generation Status Tracking</h3>
            <div class="code-block">
// Status Response
{
  "request_id": "GEN-2023-001",
  "status": "COMPLETED",
  "progress": 100,
  "reports": [
    {
      "id": "FINREP-2023-Q4-001",
      "type": "FINREP_F_01_01",
      "status": "GENERATED",
      "file_size": "2.3MB",
      "generation_time": "45m 32s",
      "download_url": "/api/v1/reports/FINREP-2023-Q4-001/download",
      "validation_status": "PASSED"
    }
  ],
  "errors": [],
  "warnings": [
    "Minor data quality issue in field GL_12345"
  ]
}
            </div>
        </section>

        <section id="validation" class="section">
            <h2>Quality Assurance and Validation</h2>

            <h3>Validation Layers</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>📋 Data Validation</h4>
                    <p>Validate data completeness, accuracy, and consistency</p>
                </div>
                <div class="feature-card">
                    <h4>📊 Business Rules</h4>
                    <p>Apply regulatory business rules and calculations</p>
                </div>
                <div class="feature-card">
                    <h4>🔍 Schema Validation</h4>
                    <p>Validate against XBRL/JSON schemas</p>
                </div>
                <div class="feature-card">
                    <h4>⚖️ Cross-Checks</h4>
                    <p>Perform mathematical and logical validations</p>
                </div>
            </div>

            <h3>Validation Rules</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Rule Type</th>
                        <th>Example</th>
                        <th>Severity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Mathematical</td>
                        <td>Assets = Liabilities + Equity</td>
                        <td>Critical</td>
                    </tr>
                    <tr>
                        <td>Range Check</td>
                        <td>Values within expected ranges</td>
                        <td>Warning</td>
                    </tr>
                    <tr>
                        <td>Completeness</td>
                        <td>All required fields present</td>
                        <td>Critical</td>
                    </tr>
                    <tr>
                        <td>Consistency</td>
                        <td>Data relationships valid</td>
                        <td>Error</td>
                    </tr>
                    <tr>
                        <td>Format</td>
                        <td>Correct data types and formats</td>
                        <td>Error</td>
                    </tr>
                </tbody>
            </table>

            <h3>Automated Validation Process</h3>
            <div class="code-block">
// Validation Configuration
{
  "validation_suite": "FINREP_Q4_2023",
  "rules": [
    {
      "id": "balance_sheet_balance",
      "type": "mathematical",
      "expression": "total_assets == total_liabilities + total_equity",
      "severity": "critical",
      "description": "Balance sheet must balance"
    },
    {
      "id": "positive_values",
      "type": "range",
      "field": "total_assets",
      "condition": "value > 0",
      "severity": "error",
      "description": "Total assets must be positive"
    },
    {
      "id": "completeness_check",
      "type": "completeness",
      "required_fields": ["reporting_date", "institution_id", "total_assets"],
      "severity": "critical",
      "description": "All mandatory fields must be present"
    }
  ],
  "output": {
    "format": "detailed_report",
    "include_passed_checks": false,
    "generate_summary": true
  }
}
            </div>

            <h3>Validation Results</h3>
            <div class="code-block">
// Validation Results Example
{
  "validation_id": "VAL-2023-001",
  "report_id": "FINREP-2023-Q4-001",
  "status": "COMPLETED",
  "summary": {
    "total_checks": 150,
    "passed": 145,
    "warnings": 3,
    "errors": 2,
    "critical_errors": 0
  },
  "issues": [
    {
      "rule_id": "balance_sheet_balance",
      "severity": "warning",
      "message": "Balance sheet difference: 0.01 EUR",
      "field": "total_equity",
      "suggestion": "Review rounding differences"
    },
    {
      "rule_id": "positive_values",
      "severity": "error",
      "message": "Negative value in loans_portfolio",
      "field": "gross_loans",
      "value": "-50000",
      "suggestion": "Verify data source for negative loans"
    }
  ],
  "recommendations": [
    "Review data quality for loans portfolio",
    "Consider implementing additional validation for balance checks"
  ]
}
            </div>
        </section>

        <section id="approval" class="section">
            <h2>Approval Workflows</h2>

            <h3>Approval Process Types</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>👥 Multi-Level Approval</h4>
                    <p>Sequential approval by different roles</p>
                </div>
                <div class="feature-card">
                    <h4>⚡ Single Approver</h4>
                    <p>Quick approval for low-risk reports</p>
                </div>
                <div class="feature-card">
                    <h4>🔄 Parallel Approval</h4>
                    <p>Multiple approvers simultaneously</p>
                </div>
                <div class="feature-card">
                    <h4>🤖 Automated Approval</h4>
                    <p>Rules-based automatic approval</p>
                </div>
            </div>

            <h3>Approval Workflow Configuration</h3>
            <div class="code-block">
// Approval Workflow Configuration
{
  "workflow_id": "FINREP_Q4_Approval",
  "report_type": "FINREP",
  "approval_levels": [
    {
      "level": 1,
      "name": "Data Quality Review",
      "approvers": ["data-quality-team@bank.com"],
      "conditions": {
        "validation_status": "passed",
        "no_critical_errors": true
      },
      "timeout_hours": 24,
      "escalation": "compliance-manager@bank.com"
    },
    {
      "level": 2,
      "name": "Business Approval",
      "approvers": ["finance-controller@bank.com", "risk-manager@bank.com"],
      "conditions": {
        "amount_threshold": "> 1000000",
        "material_changes": true
      },
      "approval_type": "any",  // Any approver can approve
      "timeout_hours": 48,
      "escalation": "chief-risk-officer@bank.com"
    },
    {
      "level": 3,
      "name": "Regulatory Approval",
      "approvers": ["chief-compliance-officer@bank.com"],
      "conditions": {
        "high_impact": true
      },
      "timeout_hours": 72,
      "escalation": "board-secretary@bank.com"
    }
  ],
  "auto_approval_rules": [
    {
      "condition": "validation_status == 'passed' AND amount < 100000",
      "max_levels": 1
    }
  ]
}
            </div>

            <h3>Approval Dashboard</h3>
            <div class="screenshot-placeholder">
                [Approval Workflow Dashboard]<br>
                Track approval status, pending approvals, and approval history
            </div>

            <h3>Approval Actions</h3>
            <div class="api-endpoint">
                <div class="method">POST</div> <code>/api/v1/approvals/{approval_id}/action</code><br>
                Approve or reject a report
            </div>

            <div class="code-block">
// Approval Action Request
{
  "action": "approve",
  "comments": "Data quality checks passed. Amounts are consistent with previous quarter.",
  "approved_by": "john.doe@bank.com",
  "approval_level": 2,
  "timestamp": "2024-01-01T09:30:00Z"
}

// Approval Response
{
  "approval_id": "APR-2023-001",
  "status": "APPROVED",
  "next_level": 3,
  "comments": "Approved by Finance Controller",
  "timestamp": "2024-01-01T09:30:15Z",
  "remaining_approvers": ["chief-compliance-officer@bank.com"]
}
            </div>
        </section>

        <section id="submission" class="section">
            <h2>Report Submission Methods</h2>

            <h3>Submission Channels</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🔐 SFTP Delivery</h4>
                    <p>Secure file transfer to regulatory authorities</p>
                </div>
                <div class="feature-card">
                    <h4>🌐 EBA API</h4>
                    <p>Direct API submission to European Banking Authority</p>
                </div>
                <div class="feature-card">
                    <h4>📧 Email Submission</h4>
                    <p>Encrypted email delivery for certain reports</p>
                </div>
                <div class="feature-card">
                    <h4>💾 Manual Upload</h4>
                    <p>Web portal upload for regulatory submissions</p>
                </div>
            </div>

            <h3>SFTP Configuration</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Host</td>
                        <td>Regulatory authority SFTP server</td>
                        <td>sftp.eba.europa.eu</td>
                    </tr>
                    <tr>
                        <td>Port</td>
                        <td>SFTP port (usually 22)</td>
                        <td>22</td>
                    </tr>
                    <tr>
                        <td>Username</td>
                        <td>Institution's SFTP username</td>
                        <td>BANK001_FINREP</td>
                    </tr>
                    <tr>
                        <td>Key File</td>
                        <td>SSH private key path</td>
                        <td>/secure/keys/bank001_key</td>
                    </tr>
                    <tr>
                        <td>Remote Path</td>
                        <td>Upload directory</td>
                        <td>/reports/finrep/2023/</td>
                    </tr>
                </tbody>
            </table>

            <h3>EBA API Submission</h3>
            <div class="api-endpoint">
                <div class="method">POST</div> <code>https://api.eba.europa.eu/reporting/submit</code><br>
                Submit report via EBA Reporting API
            </div>

            <div class="code-block">
// EBA API Submission
POST /reporting/submit
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...
Content-Type: multipart/form-data

{
  "report_type": "FINREP",
  "reporting_period": "2023-Q4",
  "institution_id": "BANK001",
  "files": [
    {
      "name": "finrep_f01_01.xbrl",
      "type": "application/xml",
      "content": "<xbrl>...</xbrl>"
    }
  ],
  "metadata": {
    "submission_timestamp": "2024-01-01T10:00:00Z",
    "contact_person": "compliance@bank.com",
    "version": "1.0"
  }
}
            </div>

            <h3>Submission Tracking</h3>
            <div class="code-block">
// Submission Status Response
{
  "submission_id": "EBA-SUB-2023-001",
  "status": "RECEIVED",
  "timestamp": "2024-01-01T10:05:23Z",
  "files": [
    {
      "name": "finrep_f01_01.xbrl",
      "status": "VALIDATED",
      "validation_errors": [],
      "processing_status": "ACCEPTED"
    }
  ],
  "confirmation": {
    "reference_number": "EBA-2023-001234",
    "receipt_timestamp": "2024-01-01T10:05:30Z"
  },
  "next_steps": [
    "Report will be processed within 24 hours",
    "Confirmation email will be sent to compliance@bank.com"
  ]
}
            </div>

            <h3>Delivery Confirmation</h3>
            <div class="success">
                <strong>Successful Submission Indicators:</strong>
                <ul>
                    <li>HTTP 200/201 status from API</li>
                    <li>SFTP upload confirmation</li>
                    <li>EBA reference number received</li>
                    <li>Confirmation email from regulator</li>
                    <li>Status update in tracking system</li>
                </ul>
            </div>
        </section>

        <section id="monitoring" class="section">
            <h2>Monitoring and Tracking</h2>

            <h3>Report Lifecycle Monitoring</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>📊 Generation Status</h4>
                    <p>Real-time generation progress tracking</p>
                </div>
                <div class="feature-card">
                    <h4>✅ Validation Status</h4>
                    <p>Quality assurance and validation results</p>
                </div>
                <div class="feature-card">
                    <h4>👥 Approval Status</h4>
                    <p>Approval workflow progress</p>
                </div>
                <div class="feature-card">
                    <h4>📤 Submission Status</h4>
                    <p>Delivery confirmation and acknowledgments</p>
                </div>
            </div>

            <h3>Status Tracking API</h3>
            <div class="api-endpoint">
                <div class="method">GET</div> <code>/api/v1/reports/{report_id}/status</code><br>
                Get comprehensive report status
            </div>

            <div class="code-block">
// Comprehensive Status Response
{
  "report_id": "FINREP-2023-Q4-001",
  "overall_status": "COMPLETED",
  "lifecycle": {
    "generation": {
      "status": "COMPLETED",
      "start_time": "2024-01-01T00:00:00Z",
      "end_time": "2024-01-01T01:30:00Z",
      "duration": "1h 30m",
      "progress": 100
    },
    "validation": {
      "status": "PASSED",
      "checks_run": 150,
      "errors": 0,
      "warnings": 3,
      "last_check": "2024-01-01T01:35:00Z"
    },
    "approval": {
      "status": "APPROVED",
      "current_level": 3,
      "total_levels": 3,
      "approvers": [
        "data-quality-team@bank.com",
        "finance-controller@bank.com",
        "chief-compliance-officer@bank.com"
      ],
      "last_approval": "2024-01-01T09:45:00Z"
    },
    "submission": {
      "status": "DELIVERED",
      "method": "EBA_API",
      "submission_time": "2024-01-01T10:00:00Z",
      "confirmation_time": "2024-01-01T10:05:30Z",
      "reference_number": "EBA-2023-001234"
    }
  },
  "issues": [
    {
      "type": "warning",
      "message": "Minor balance difference of 0.01 EUR",
      "resolved": true,
      "resolution": "Approved by controller"
    }
  ],
  "timeline": [
    {"event": "Generation Started", "timestamp": "2024-01-01T00:00:00Z"},
    {"event": "Generation Completed", "timestamp": "2024-01-01T01:30:00Z"},
    {"event": "Validation Completed", "timestamp": "2024-01-01T01:35:00Z"},
    {"event": "Approval Level 1", "timestamp": "2024-01-01T08:00:00Z"},
    {"event": "Approval Level 2", "timestamp": "2024-01-01T09:30:00Z"},
    {"event": "Approval Level 3", "timestamp": "2024-01-01T09:45:00Z"},
    {"event": "Submission Started", "timestamp": "2024-01-01T10:00:00Z"},
    {"event": "Submission Confirmed", "timestamp": "2024-01-01T10:05:30Z"}
  ]
}
            </div>

            <h3>Alert Configuration</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Event Type</th>
                        <th>Alert Condition</th>
                        <th>Notification Method</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Generation Failure</td>
                        <td>Status = FAILED</td>
                        <td>Email + Slack</td>
                    </tr>
                    <tr>
                        <td>Validation Errors</td>
                        <td>Critical errors > 0</td>
                        <td>Email to compliance team</td>
                    </tr>
                    <tr>
                        <td>Approval Timeout</td>
                        <td>No action within timeout</td>
                        <td>Escalation email</td>
                    </tr>
                    <tr>
                        <td>Submission Failure</td>
                        <td>Delivery failed</td>
                        <td>Immediate notification</td>
                    </tr>
                    <tr>
                        <td>Deadline Approaching</td>
                        <td>< 24 hours to deadline</td>
                        <td>Reminder email</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="troubleshooting" class="section">
            <h2>Troubleshooting</h2>

            <h3>Common Issues</h3>

            <h4>Data Collection Failures</h4>
            <div class="warning">
                <strong>Problem:</strong> Data source connection fails during report generation<br>
                <strong>Solution:</strong> Check source system connectivity and credentials
            </div>

            <div class="step-list">
                <li>Verify network connectivity to data source</li>
                <li>Check database credentials and permissions</li>
                <li>Review connection pool settings</li>
                <li>Test data source with simple query</li>
                <li>Contact data source administrator if needed</li>
            </div>

            <h4>Validation Errors</h4>
            <div class="warning">
                <strong>Problem:</strong> Report fails validation with critical errors<br>
                <strong>Solution:</strong> Review validation results and correct data issues
            </div>

            <div class="step-list">
                <li>Examine detailed validation error messages</li>
                <li>Trace errors back to source data</li>
                <li>Verify data transformations and mappings</li>
                <li>Check for data quality issues in source systems</li>
                <li>Apply corrections and re-run validation</li>
            </div>

            <h4>Submission Failures</h4>
            <div class="warning">
                <strong>Problem:</strong> Report submission fails to regulatory authority<br>
                <strong>Solution:</strong> Verify submission configuration and network connectivity
            </div>

            <div class="step-list">
                <li>Check SFTP server connectivity and credentials</li>
                <li>Verify EBA API authentication and endpoints</li>
                <li>Confirm report format meets regulatory requirements</li>
                <li>Review submission logs for detailed error information</li>
                <li>Retry submission with corrected configuration</li>
            </div>

            <h3>Error Codes Reference</h3>
            <table class="config-table">
                <thead>
                    <tr>
                        <th>Error Code</th>
                        <th>Description</th>
                        <th>Resolution Steps</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>DAT-001</td>
                        <td>Data source unavailable</td>
                        <td>Check connectivity, retry later</td>
                    </tr>
                    <tr>
                        <td>VAL-001</td>
                        <td>Validation rule failure</td>
                        <td>Review data quality, correct issues</td>
                    </tr>
                    <tr>
                        <td>GEN-001</td>
                        <td>Template not found</td>
                        <td>Verify template configuration</td>
                    </tr>
                    <tr>
                        <td>SUB-001</td>
                        <td>Submission authentication failed</td>
                        <td>Check credentials, retry authentication</td>
                    </tr>
                    <tr>
                        <td>SUB-002</td>
                        <td>Network timeout</td>
                        <td>Check network, increase timeout, retry</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="best-practices" class="section">
            <h2>Best Practices</h2>

            <h3>Report Generation Best Practices</h3>
            <div class="success">
                <strong>Preparation:</strong>
                <ul>
                    <li>Test report generation in development environment first</li>
                    <li>Verify data sources are accessible and up-to-date</li>
                    <li>Review regulatory requirements and template versions</li>
                    <li>Configure appropriate approval workflows</li>
                    <li>Set up monitoring and alerting for critical reports</li>
                </ul>
            </div>

            <h3>Quality Assurance</h3>
            <div class="step-list">
                <li><strong>Automated Validation:</strong> Enable all relevant validation rules</li>
                <li><strong>Manual Review:</strong> Perform spot checks on high-value reports</li>
                <li><strong>Cross-Verification:</strong> Compare with previous periods and expectations</li>
                <li><strong>Documentation:</strong> Maintain detailed records of validation procedures</li>
                <li><strong>Continuous Improvement:</strong> Review and update validation rules regularly</li>
            </div>

            <h3>Submission Best Practices</h3>
            <div class="highlight">
                <strong>Secure Delivery:</strong>
                <ul>
                    <li>Use encrypted channels (SFTP, HTTPS) for all submissions</li>
                    <li>Implement digital signatures for report integrity</li>
                    <li>Verify submission confirmations immediately</li>
                    <li>Maintain detailed submission logs and audit trails</li>
                    <li>Test submission channels regularly</li>
                </ul>
            </div>

            <h3>Performance Optimization</h3>
            <div class="step-list">
                <li><strong>Scheduling:</strong> Schedule heavy reports during off-peak hours</li>
                <li><strong>Parallel Processing:</strong> Generate multiple reports concurrently when possible</li>
                <li><strong>Caching:</strong> Cache frequently used data and templates</li>
                <li><strong>Monitoring:</strong> Monitor system resources and performance metrics</li>
                <li><strong>Optimization:</strong> Regularly review and optimize database queries</li>
            </div>

            <h3>Risk Management</h3>
            <div class="warning">
                <strong>Risk Mitigation:</strong>
                <ul>
                    <li>Implement redundant data sources and backup systems</li>
                    <li>Have manual processes ready for automated failures</li>
                    <li>Maintain multiple submission channels</li>
                    <li>Regular testing of disaster recovery procedures</li>
                    <li>Clear escalation procedures for critical issues</li>
                </ul>
            </div>

            <h3>Compliance Considerations</h3>
            <div class="step-list">
                <li><strong>Regulatory Deadlines:</strong> Build buffer time into schedules</li>
                <li><strong>Documentation:</strong> Maintain comprehensive audit trails</li>
                <li><strong>Training:</strong> Ensure staff are trained on procedures</li>
                <li><strong>Change Management:</strong> Document all process changes</li>
                <li><strong>Continuous Monitoring:</strong> Monitor regulatory changes and updates</li>
            </div>
        </section>

        <div class="footer">
            <p>&copy; 2024 ComplianceAI. Report Generation and Submission Guide v2.0</p>
            <p>Last updated: January 2024 | For technical support, contact compliance-support@company.com</p>
        </div>
    </div>

    <script>
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleTOC() {
            const toc = document.getElementById('toc');
            if (toc.style.display === 'none') {
                toc.style.display = 'block';
            } else {
                toc.style.display = 'none';
            }
        }

        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Add smooth scrolling to TOC links
        document.querySelectorAll('.toc a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Show TOC by default
        document.getElementById('toc').style.display = 'block';
    </script>
</body>
</html>
