<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Guide - Agentic AI KYC Engine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-robot me-2"></i>
                Agentic AI KYC Engine
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">
                    <i class="fas fa-home me-1"></i>
                    Dashboard
                </a>
                <a class="nav-link active" href="/userguide">
                    <i class="fas fa-book me-1"></i>
                    User Guide
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="fas fa-list me-2"></i>
                            Table of Contents
                        </h6>
                    </div>
                    <div class="card-body">
                        <nav class="nav flex-column">
                            <a class="nav-link" href="#overview">System Overview</a>
                            <a class="nav-link" href="#getting-started">Getting Started</a>
                            <a class="nav-link" href="#agents">AI Agents</a>
                            <a class="nav-link" href="#processing">KYC Processing</a>
                            <a class="nav-link" href="#compliance">Compliance</a>
                            <a class="nav-link" href="#monitoring">Monitoring</a>
                            <a class="nav-link" href="#api">API Reference</a>
                            <a class="nav-link" href="#troubleshooting">Troubleshooting</a>
                        </nav>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <div class="card">
                    <div class="card-body">
                        <h1 class="mb-4">
                            <i class="fas fa-book-open me-2"></i>
                            Agentic AI KYC Engine User Guide
                        </h1>

                        <section id="overview" class="mb-5">
                            <h2 class="border-bottom pb-2">System Overview</h2>
                            <p class="lead">
                                The Agentic AI KYC Engine is a production-grade, autonomous Know Your Customer (KYC) 
                                processing system that leverages 5 specialized AI agents to perform comprehensive 
                                customer due diligence and compliance checks.
                            </p>
                            
                            <h4>Key Features</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <i class="fas fa-robot text-primary me-2"></i>
                                    <strong>Autonomous Processing:</strong> Fully automated KYC workflows with minimal human intervention
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-globe text-primary me-2"></i>
                                    <strong>Industry Agnostic:</strong> Configurable for banking, fintech, crypto, insurance, and more
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-database text-primary me-2"></i>
                                    <strong>Schema Agnostic:</strong> Processes data in any format without predefined schemas
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-shield-alt text-primary me-2"></i>
                                    <strong>Regulatory Compliance:</strong> Built-in support for AML, GDPR, Basel III, and more
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-tachometer-alt text-primary me-2"></i>
                                    <strong>High Performance:</strong> Capable of processing 10,000+ KYC checks per hour
                                </li>
                            </ul>
                        </section>

                        <section id="getting-started" class="mb-5">
                            <h2 class="border-bottom pb-2">Getting Started</h2>
                            
                            <h4>Prerequisites</h4>
                            <ul>
                                <li>Docker and Docker Compose installed</li>
                                <li>Minimum 8GB RAM and 4 CPU cores</li>
                                <li>Network access for AI model downloads</li>
                            </ul>
                            
                            <h4>Quick Start</h4>
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                Follow these steps to get the system running in minutes.
                            </div>
                            
                            <ol>
                                <li><strong>Clone the repository:</strong>
                                    <pre class="bg-light p-3 rounded"><code>git clone https://github.com/your-org/kyc-engine.git
cd kyc-engine</code></pre>
                                </li>
                                <li><strong>Configure environment:</strong>
                                    <pre class="bg-light p-3 rounded"><code>cp .env.example .env
# Edit .env with your configuration</code></pre>
                                </li>
                                <li><strong>Start the system:</strong>
                                    <pre class="bg-light p-3 rounded"><code>docker-compose up -d</code></pre>
                                </li>
                                <li><strong>Access the dashboard:</strong>
                                    <p>Open <a href="http://localhost:8000" target="_blank">http://localhost:8000</a> in your browser</p>
                                </li>
                            </ol>
                        </section>

                        <section id="agents" class="mb-5">
                            <h2 class="border-bottom pb-2">AI Agents</h2>
                            <p>The system employs 5 specialized AI agents, each using different frameworks for optimal performance:</p>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="card border-start-primary">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-download text-primary me-2"></i>
                                                Data Ingestion Agent
                                            </h5>
                                            <p class="card-text">
                                                <strong>Framework:</strong> LangChain<br>
                                                <strong>Purpose:</strong> Multi-format data ingestion, schema detection, and normalization
                                            </p>
                                            <ul class="small">
                                                <li>Supports CSV, JSON, XML, PDF, images, databases</li>
                                                <li>Dynamic schema inference</li>
                                                <li>Real-time and batch processing</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <div class="card border-start-success">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-search text-success me-2"></i>
                                                KYC Analysis Agent
                                            </h5>
                                            <p class="card-text">
                                                <strong>Framework:</strong> CrewAI<br>
                                                <strong>Purpose:</strong> Collaborative risk assessment and customer due diligence
                                            </p>
                                            <ul class="small">
                                                <li>Multi-agent collaboration</li>
                                                <li>Risk scoring and assessment</li>
                                                <li>Regulatory compliance checking</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <div class="card border-start-warning">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-gavel text-warning me-2"></i>
                                                Decision Making Agent
                                            </h5>
                                            <p class="card-text">
                                                <strong>Framework:</strong> LangGraph<br>
                                                <strong>Purpose:</strong> Stateful workflows and autonomous final decisions
                                            </p>
                                            <ul class="small">
                                                <li>Complex decision workflows</li>
                                                <li>Explainable AI decisions</li>
                                                <li>Audit trail generation</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <div class="card border-start-info">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-shield-alt text-info me-2"></i>
                                                Compliance Monitoring Agent
                                            </h5>
                                            <p class="card-text">
                                                <strong>Framework:</strong> Microsoft AutoGen<br>
                                                <strong>Purpose:</strong> Regulatory compliance and reporting
                                            </p>
                                            <ul class="small">
                                                <li>AML, GDPR, Basel III compliance</li>
                                                <li>Automated reporting</li>
                                                <li>Real-time monitoring</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-12 mb-3">
                                    <div class="card border-start-danger">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-check-circle text-danger me-2"></i>
                                                Data Quality Agent
                                            </h5>
                                            <p class="card-text">
                                                <strong>Framework:</strong> Smolagents<br>
                                                <strong>Purpose:</strong> Data validation, quality assurance, and anomaly detection
                                            </p>
                                            <ul class="small">
                                                <li>Comprehensive data validation</li>
                                                <li>Anomaly detection using multiple ML algorithms</li>
                                                <li>Quality scoring and recommendations</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section id="processing" class="mb-5">
                            <h2 class="border-bottom pb-2">KYC Processing Workflow</h2>
                            
                            <div class="alert alert-success">
                                <i class="fas fa-lightbulb me-2"></i>
                                The system processes KYC requests through 5 sequential stages, each handled by specialized agents.
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <div class="timeline">
                                        <div class="timeline-item">
                                            <div class="timeline-marker bg-primary"></div>
                                            <div class="timeline-content">
                                                <h5>Stage 1: Data Quality Validation</h5>
                                                <p>The Data Quality Agent validates incoming data for completeness, accuracy, and consistency.</p>
                                            </div>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <div class="timeline-marker bg-info"></div>
                                            <div class="timeline-content">
                                                <h5>Stage 2: Data Ingestion & Normalization</h5>
                                                <p>The Data Ingestion Agent processes and normalizes data from multiple sources and formats.</p>
                                            </div>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <div class="timeline-marker bg-success"></div>
                                            <div class="timeline-content">
                                                <h5>Stage 3: KYC Analysis</h5>
                                                <p>The KYC Analysis Agent performs risk assessment and customer due diligence.</p>
                                            </div>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <div class="timeline-marker bg-warning"></div>
                                            <div class="timeline-content">
                                                <h5>Stage 4: Compliance Monitoring</h5>
                                                <p>The Compliance Monitoring Agent checks against regulatory requirements.</p>
                                            </div>
                                        </div>
                                        
                                        <div class="timeline-item">
                                            <div class="timeline-marker bg-danger"></div>
                                            <div class="timeline-content">
                                                <h5>Stage 5: Decision Making</h5>
                                                <p>The Decision Making Agent synthesizes all results and makes the final KYC decision.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section id="compliance" class="mb-5">
                            <h2 class="border-bottom pb-2">Regulatory Compliance</h2>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <i class="fas fa-money-bill-wave fa-3x text-success mb-3"></i>
                                            <h5>AML Compliance</h5>
                                            <p class="small">Anti-Money Laundering checks including sanctions screening, PEP detection, and transaction monitoring.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <i class="fas fa-user-shield fa-3x text-primary mb-3"></i>
                                            <h5>GDPR Compliance</h5>
                                            <p class="small">Data protection compliance including consent management, data minimization, and right to erasure.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <i class="fas fa-university fa-3x text-warning mb-3"></i>
                                            <h5>Basel III</h5>
                                            <p class="small">Banking regulation compliance including operational risk assessment and model validation.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section id="monitoring" class="mb-5">
                            <h2 class="border-bottom pb-2">System Monitoring</h2>
                            
                            <h4>Dashboard Features</h4>
                            <ul>
                                <li><strong>Real-time Status:</strong> Monitor system health and agent status</li>
                                <li><strong>Performance Metrics:</strong> Track processing times, throughput, and success rates</li>
                                <li><strong>Session Tracking:</strong> View active and completed KYC sessions</li>
                                <li><strong>Decision Analytics:</strong> Analyze decision patterns and outcomes</li>
                            </ul>
                            
                            <h4>Prometheus Metrics</h4>
                            <p>The system exposes comprehensive metrics at <code>/metrics</code> endpoint for Prometheus integration:</p>
                            <ul>
                                <li>Request counters and processing duration histograms</li>
                                <li>Agent health and performance metrics</li>
                                <li>Compliance violation counters</li>
                                <li>Data quality scores and anomaly detection rates</li>
                            </ul>
                        </section>

                        <section id="api" class="mb-5">
                            <h2 class="border-bottom pb-2">API Reference</h2>
                            
                            <h4>Core Endpoints</h4>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Endpoint</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-success">POST</span></td>
                                            <td><code>/api/v1/kyc/process</code></td>
                                            <td>Submit KYC processing request</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-primary">GET</span></td>
                                            <td><code>/api/v1/kyc/status/{session_id}</code></td>
                                            <td>Get KYC session status</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">POST</span></td>
                                            <td><code>/api/v1/data/ingest</code></td>
                                            <td>Direct data ingestion</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-primary">GET</span></td>
                                            <td><code>/api/v1/compliance/check/{customer_id}</code></td>
                                            <td>Check compliance status</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-primary">GET</span></td>
                                            <td><code>/api/v1/agents/status</code></td>
                                            <td>Get all agents status</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">POST</span></td>
                                            <td><code>/api/v1/config/industry</code></td>
                                            <td>Configure industry settings</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>

                        <section id="troubleshooting" class="mb-5">
                            <h2 class="border-bottom pb-2">Troubleshooting</h2>
                            
                            <h4>Common Issues</h4>
                            
                            <div class="accordion" id="troubleshootingAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                                            Agent Status Shows "Unhealthy"
                                        </button>
                                    </h2>
                                    <div id="collapse1" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Check agent container logs: <code>docker logs [agent-container-name]</code></li>
                                                <li>Verify network connectivity between services</li>
                                                <li>Ensure all required environment variables are set</li>
                                                <li>Restart the specific agent: <code>docker-compose restart [agent-service]</code></li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                                            KYC Processing Fails
                                        </button>
                                    </h2>
                                    <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Validate input JSON format</li>
                                                <li>Check data quality scores - may require better input data</li>
                                                <li>Review agent logs for specific error messages</li>
                                                <li>Verify Kafka message bus is operational</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                                            Performance Issues
                                        </button>
                                    </h2>
                                    <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Monitor system resources (CPU, memory, disk)</li>
                                                <li>Check Kafka and Redis performance</li>
                                                <li>Scale agent instances if needed</li>
                                                <li>Review database query performance</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-info mt-4">
                                <i class="fas fa-life-ring me-2"></i>
                                <strong>Need Help?</strong> Check the system logs, review the configuration, and ensure all services are running properly.
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #dee2e6;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
        }
        
        .timeline-marker {
            position: absolute;
            left: -22px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #dee2e6;
        }
        
        .timeline-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-left: 20px;
        }
        
        .timeline-content h5 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .timeline-content p {
            margin-bottom: 0;
            color: #666;
        }
    </style>
</body>
</html>
